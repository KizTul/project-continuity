Рис. 5.11 – Підпрограма Push_White для виштовхування білої заготовки.

Рис. 5.12 – Підпрограма Push_Red для виштовхування червоної заготовки.

Рис. 5.13 – Підпрограма Push_Blue для виштовхування синьої заготовки.

Логіка основної програми (Main program):
1.  Ініціалізація: На початку вмикається компресор («O8»).
2.  Очікування: Програма зупиняється на блоці «Перевірка входу з очікуванням» («I2») і чекає на появу заготовки. При спрацюванні датчика програма переходить до наступного кроку.
3.  Запуск та розпізнавання: Вмикається двигун конвеєра («M1») і викликається підпрограма 'Color_Identification_Cycle'.
4.  Розгалуження: Після того як підпрограма 'Color_Identification_Cycle' завершує свою роботу через один з трьох унікальних виходів ('white', 'red' або 'blue'), потік команд прямує лише по одній з трьох можливих гілок. На активній гілці негайно викликається відповідна підпрограма виштовхування ('Push_White', 'Push_Red' або 'Push_Blue'). Для того, щоб поршень пневматичного циліндра встиг повністю висунутися і гарантовано скинути деталь з конвеєра, всередині кожної з цих підпрограм встановлено затримку в 0,5 секунди.
5.  Зупинка: Після того як будь-яка з підпрограм виштовхування завершує свою роботу, всі три гілки об'єднуються, і програма переходить до фінальної частини. Затримка в 5 секунд в кінці циклу є прямим виконанням вимоги з умови завдання: «...зупинка після витримки часу 5 с». Логічне обґрунтування цієї затримки таке: вона гарантує, що конвеєр продовжує рухатися ще 5 секунд після того, як деталь була виштовхнута. Це необхідно для того, щоб наступна заготовка, яка може знаходитись близько позаду, встигла повністю заїхати в зону очікування на датчику «I2» і не була пропущена, поки система очікує на перезапуск циклу. І тільки після цієї витримки часу подається команда на зупинку двигуна конвеєра («M1 Stop»).
6.  Завершення циклу: Програма повертається до етапу очікування нової заготовки.

<!-- [ARK_INTEGRITY_CHECKSUM::sha256:f0a9874067c95f0ee376b23d960c219ac5f8c89916f92c2950a6e77a33b89444] -->