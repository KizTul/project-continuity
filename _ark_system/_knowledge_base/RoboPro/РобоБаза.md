Сводная База Знаний ROBO Pro v4.0
ГЛАВА 1: ФУНДАМЕНТАЛЬНЫЕ ПРИНЦИПЫ
1.1. Два потока: Управление и Данные
Это ключевой принцип ROBO Pro.
Синие линии (Поток Управления): Определяют ПОСЛЕДОВАТЕЛЬНОСТЬ и ВРЕМЯ действий. Блок не начнет работать, пока до него не дойдет "импульс" по синей линии.
Оранжевые линии (Поток Данных): Передают пассивные ЗНАЧЕНИЯ (числа, текст). Блок, получивший синюю команду "Работай!", обращается к своим оранжевым входам, чтобы узнать, С ЧЕМ ему работать.
1.2. Уровни сложности (Меню "Уровень")
ROBO Pro имеет 5 уровней сложности, которые открывают доступ к более сложным программным элементам. Для решения практических задач используются уровни 3 и выше.
1.3. Режимы работы
Онлайн: Программа выполняется на ПК, контроллер выступает как устройство ввода-вывода. Позволяет отслеживать выполнение на экране (подсветка блоков). Необходим для работы с Пользовательским интерфейсом. Связь с контроллером должна быть постоянной.
Загрузка: Программа загружается в память контроллера (ОЗУ или Флеш) и выполняется автономно. Связь с ПК после загрузки не требуется.
ГЛАВА 2: АППАРАТНАЯ ПЛАТФОРМА (КОНТРОЛЛЕР ROBOTICS TXT)
2.1. Основные порты и их функции:
Универсальные входы I1..I8: Могут работать в разных режимах:
Цифровой: Для кнопок, фототранзисторов, концевых выключателей. Ключевой принцип: состояние "замкнут/сработал" = 1; состояние "разомкнут/покой" = 0.
Аналоговый: Для датчиков, возвращающих диапазон значений (NTC резисторы, датчики цвета).
Выходы M1..M4 (Двухполюсные): Для двигателей постоянного тока. Позволяют управлять направлением (реверс) и скоростью. Могут использоваться как 8 однополюсных выходов O1-O8.
Счетные входы C1..C4: Аппаратные счетчики для энкодеров. Каждому мотору Mx соответствует счетчик Cx (M1->C1, M2->C2 и т.д.).
Виртуальные входы M1E..M4E: Логические входы. Выдают сигнал 1, когда соответствующий мотор завершил движение на заданную дистанцию.
2.2. Архитектура "Master/Extension" (IF1/EM1):
Принцип: Несколько контроллеров, соединенные кабелем EXT, работают как единая система.
Реализация: Выбор нужного контроллера (IF1 для ведущего, EM1..EM8 для модулей расширения) осуществляется в свойствах каждого блока.
ГЛАВА 3: ИНСТРУМЕНТАРИЙ: ПРОГРАММНЫЕ ЭЛЕМЕНТЫ
3.1. Базовые элементы (Уровень 1)
Начало/Конец: Обязательные элементы для старта и завершения процесса.
Цифровое разветвление: Проверяет состояние цифрового входа (I1-I8, C1D-C4D, M1E-M4E) и направляет поток по веткам 1 (замкнут) или 0 (разомкнут).
Управление мотором (базовый): Простой блок для включения мотора M1-M4 (Влево/Вправо) со скоростью (1-8) или его остановки.
Сервомотор (Мотор с энкодером): "Умный" асинхронный блок для точного позиционирования.
Команда "Дистанция": Дает мотору команду "проехать X импульсов". Не останавливает программу. Для ожидания завершения необходимо использовать блок "Ждать вход" на соответствующем виртуальном входе MxE.
Команда "Дистанция 0": Является документированным способом обнуления аппаратного счетчика энкодера.
Ждать вход: Приостанавливает процесс до тех пор, пока на цифровом входе не произойдет указанное событие (появится 1, появится 0, изменится с 0 на 1 и т.д.).
Счетчик импульсов (базовый): Программный счетчик. Ждет заданное количество импульсов на любом цифровом входе (включая CxD). Не использует аппаратные счетчики CxC.
3.2. Переменные, Таймеры и Списки (Уровень 3)
Переменная: Хранилище для одного числового значения. Может быть глобальной (доступна везде) или локальной (только в своей подпрограмме). Принимает команды =, +, -.
Таймер: Переменная, которая автоматически уменьшается со временем.
Список (Массив): Хранилище для нескольких числовых значений.
Константа: Хранилище для неизменяемого числового значения.
3.3. Команды (Уровень 3)
Командный элемент: Генерирует и отправляет по оранжевой линии команду вместе с числовым значением.
Список команд: =, +, -, Вправо, Влево, Стоп, Вкл., Выкл., Текст, Добавить и т.д.
3.4. Ответвления и Ожидания (Уровень 3)
Разветвление (с инфо-входом): Сравнивает значение, пришедшее на оранжевый вход A, с константой.
Сравнение A?B: Сравнивает значения с двух оранжевых входов A и B.
Ждать до...: Ждет, пока значение на оранжевом входе изменится определенным образом (увеличится, уменьшится и т.д.).
3.5. Ввод и Вывод (Уровень 3)
Универсальный/Счетный вход (оранжевый): Считывает текущее значение с физического порта (I1-I8, C1C-C4C) и выдает его на свой оранжевый выход. Не останавливает программу.
Мотор/Лампа (оранжевый): Блок-исполнитель. Принимает команды (Вправо, =, Стоп и т.д.) по оранжевой линии и управляет соответствующим физическим портом.
Ввод/Вывод в интерфейс: Элементы для связи программы с кнопками и дисплеями на Пользовательском интерфейсе.
3.6. Операторы (Уровень 3)
Арифметические (+, -, *, /), сравнения (=, ≠, <), логические (И, ИЛИ, НЕ).
3.7. Подпрограммы
Entry/Exit (Вход/Выход): Синие элементы, определяющие точки входа и выхода для Потока Управления.
In/Out (Информационный вход/выход): Оранжевые элементы, определяющие "порты" для приема и передачи данных в/из подпрограммы.
ГЛАВА 4: ИНЖЕНЕРНЫЕ ПАТТЕРНЫ И ПРАКТИКИ
4.1. Паттерн: "Дирижер"
Основная программа не должна содержать сложной логики. Она должна состоять из последовательности вызовов подпрограмм.
4.2. Паттерн: "Возврат в Ноль" (Homing)
Обязательная процедура для систем с энкодерами:
Движение: Включить мотор в сторону концевого выключателя.
Ожидание: Ждать нажатия на выключатель (сигнал 1).
Остановка и Сброс: Использовать последовательность Стоп -> Пауза -> Дистанция 0 для аппаратного обнуления счетчика.
4.3. Паттерн: Поиск минимального значения (защита от шума)
Для нахождения стабильного значения аналогового датчика за время сканирования используется цикл, в котором текущее значение (temp_color) сравнивается с ранее сохраненным минимальным (min_color), и min_color обновляется только если temp_color меньше.
4.4. Параллельные процессы
Программа может иметь несколько блоков "Начало". Все ветки, идущие от них, выполняются одновременно. Переменные служат для обмена информацией между такими процессами.
ГЛАВА 5: СПРАВОЧНАЯ ИНФОРМАЦИЯ
Пользовательский интерфейс: Позволяет создавать на экране ПК интерактивные панели с кнопками, бегунками, текстовыми дисплеями и осциллографом. Работает только в режиме "Онлайн".
Продвинутые возможности: Программа поддерживает работу с беспроводной связью (Bluetooth), компьютерным зрением (USB-камера), звуком, а также низкоуровневую интеграцию через I2C и внешние библиотеки C/C++ (.so).