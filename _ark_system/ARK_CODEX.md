# КОДЕКС ARK v1.5

## ГЛАВА 1: НАЗНАЧЕНИЕ

Этот документ является живой "энциклопедией" наших практических правил, стандартов и конвенций. Он отвечает на вопрос "КАКОВЫ ПРАВИЛА ВЫПОЛНЕНИЯ?".

---

## ГЛАВА 2: СТАНДАРТНАЯ СТРУКТУРА ПРОЕКТА <a name="project-structure"></a>

**Назначение:** Данная структура является универсальным фреймворком для организации всех проектов в экосистеме ARK. Она обеспечивает предсказуемость, разделение ответственности и масштабируемость.

```
projects/
└── [ProjectName]/
    ├── README.md              # "Паспорт" проекта. Должен содержать цель, статус, технологии и инструкцию по запуску.
    ├── config.json            # Конфигурация для инструментов автоматизации проекта.
    |
    ├── _docs/                 # Вся человекочитаемая документация.
    │   ├── GDD.md             # Устав Проекта ("Hub").
    │   ├── Roadmap.md         # Тактический План.
    │   └── specs/             # Детальные Спецификации ("Spokes").
    |
    ├── _src/                  # Исходники: код, сцены, ассеты.
    |
    ├── _tools/                # Инструменты автоматизации проекта.
    |
    └── _references/           # Внешние материалы.
```

---

## ГЛАВА 3: СТАНДАРТЫ УПРАВЛЕНИЯ ВЕРСИЯМИ (GIT) <a name="git-standards"></a>

### #GS-1: Принцип Управления Секретами
*   **Правило:** Все секретные данные (API-ключи, токены, пароли) **ЗАПРЕЩЕНО** хранить в системе контроля версий (Git). Файлы `.env` **обязаны** быть включены в корневой `.gitignore`.
*   **Практика для локальной разработки:** Использовать файлы `.env`.
*   **Практика для развертывания:** Использовать встроенные механизмы хостинга (Secrets).

### #GS-2: Методология Git Flow
*   **`main`:** Только стабильный, готовый к развертыванию код.
*   **`develop`:** Основная ветка разработки.
*   **`feature/[feature-name]`:** Ветки для нового функционала.
*   **`release/[version]`:** Ветки для подготовки релиза.
*   **`hotfix/[issue]`:** Ветки для срочных исправлений.

### #GS-3: Стандарт Коммитов
*   **Правило:** Все коммиты должны следовать спецификации **Conventional Commits**.
*   **Формат:** `type(scope): description`
*   **Примеры:**
    *   `feat: добавлена система аутентификации`
    *   `fix(parser): исправлена ошибка обработки Unicode`
    *   `docs: обновлен README.md`
    *   `style: применены правила линтера`
    *   `refactor: улучшена логика кэширования`
    *   `test: добавлены юнит-тесты для API`
*   **META-коммиты:** Изменения в "Документах Ядра" и "Кодексах Опыта" фиксируются с типом `meta`. *Пример: `meta: усилен принцип #CP-1`.*

---

## ГЛАВА 4: СТАНДАРТЫ КАЧЕСТВА КОДА <a name="code-quality"></a>

### #KQ-1: Протокол Финальной Верификации ("Цербер")
| Уровень | Критерии | Действие при сбое |
| :--- | :--- | :--- |
| **1. Синтаксис** | Код не содержит синтаксических ошибок. | Немедленное исправление. |
| **2. Логика** | Код решает поставленную задачу в соответствии с Планом. | Анализ ошибки, возврат к Плану. |
| **3. Интеграция** | Код корректно взаимодействует с другими частями проекта. | Выдача с пометкой `⚠ Контекстная интеграция неполна`. |

### #KQ-2: Протокол Отказоустойчивости ("Атлант")
*   **Описание:** Код, работающий с внешними данными, должен включать обработку ошибок.
*   **Требования:**
    *   Проверки на `null` или `is_instance_valid()`.
    *   Обработка ошибок загрузки ресурсов (`try-except` или аналоги).
*   **Стандартная реакция при ошибке:** Логирование ошибки и возврат безопасного значения по умолчанию.

### #KQ-3: Стиль и Читаемость
*   **Комментарии:** Объясняют **"почему"** (архитектурное решение), а не "что".
*   **Маркировка гипотез:** В коде используется тег `# [ГИПОТЕЗА]: [текст]`.

### #KQ-4: Стандарты Именования
*   **Переменные и функции:** `snake_case`. Приватные — `_snake_case`.
*   **Классы и сцены:** `PascalCase`.
*   **Константы:** `ALL_CAPS`.
*   **Сигналы:** `past_tense` (например, `health_depleted`).

### #KQ-5: Статический Анализ Кода
*   **Правило:** Для каждого проекта должен быть настроен и использоваться соответствующий линтер (например, `pylint` для Python, `gdscript-linter` для Godot). Код с ошибками уровня `Error`, обнаруженными линтером, не может быть принят в `develop` ветку.

---

## ГЛАВА 5: СТАНДАРТЫ ИНТЕГРАЦИИ С ИНСТРУМЕНТАМИ

### #TI-3: Стандарт Интерактивных Инструментов
*   **Правило:** Все инструменты-запускаторы (`.bat`), предназначенные для интерактивного использования Напарником, должны:
    1.  Устанавливать корректную кодировку вывода (`chcp 65001 > nul`).
    2.  Завершаться командой `pause`, чтобы сохранить окно консоли открытым для анализа.