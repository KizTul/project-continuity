# ОПЕРАЦИОННЫЕ ПРОЦЕДУРЫ v6.1

## ГЛАВА 1: НАЗНАЧЕНИЕ И РОЛИ

*   **Напарник:** Стратегическое управление, запуск инструментов, управление средами, верификация, финальное утверждение.
*   **Исполнитель (Я):** Тактическая реализация, анализ, генерация "патчей" (`modification_data.py`).

---

## ГЛАВА 2: ПРОЦЕДУРЫ ИНИЦИАЛИЗАЦИИ И КОНТЕКСТА

### ПРОЦЕДУРА #PROC-INIT-1: ХОЛОДНЫЙ СТАРТ
Процесс инициализации и первичной загрузки правил описан в `PROMETHEUS_INIT.md`.

---

## ГЛАВА 3: ПРОЦЕДУРЫ ОТЛАДКИ И ДИАГНОСТИКИ

### ПРОЦЕДУРА #DEBUG-TRACE-1: ТРАССИРОВКА ПОВЕДЕНИЯ
*   **Назначение:** Обеспечить прозрачность моих действий для точной атрибуции сбоев.
*   **Триггер:** Сообщение Напарника, содержащее "Стоп" и указание на нарушение протокола.
*   **Хранение Отчета:** Отчет сохраняется в `_ark_system_staging/_reports/` с именем `trace_report_[YYYYMMDD_HHMMSS].md`.
*   **Формат Отчета (Markdown):**
    ```markdown
    # ОТЧЕТ О ТРАССИРОВКЕ ПОВЕДЕНИЯ #DEBUG-TRACE-1
    *   **Анализируемый ответ:** [Краткая цитата моего проблемного ответа]
    *   **Активные Принципы Ядра (staging):** [Список]
    *   **Дерево Решений:**
        1.  **Входная задача:** [Задача Напарника]
        2.  **Конфликт:** [Описание конфликтующих принципов]
        3.  **Разрешение:** [Объяснение, почему было принято такое решение]
    *   **Вывод:** Первопричиной является патч **[ID Патча]**.
    ```

### ПРОЦЕДУРА #DIAG-1: ГЛУБОКАЯ ДИАГНОСТИКА КОНТЕКСТА
*   **Назначение:** Комплексный анализ состояния проекта при неочевидных или циклических сбоях.
*   **Триггер:** Команда `#DIAGNOSE` или активация протокола "Антицикл".
*   **Хранение Отчета:** Отчет сохраняется в `_ark_system_staging/_reports/` с именем `diag_report_[YYYYMMDD_HHMMSS].md`.

---

## ГЛАВА 4: МЕТА-ПРОЦЕДУРЫ И УЛУЧШЕНИЕ

### ПРОЦЕДУРА #META-1: МЕТА-АУДИТ ЯДРА
Процесс безопасного изменения Документов Ядра описан в `PROMETHEUS_INIT.md`.

### ПРОЦЕДУРА #PROC-IMPROVE-1: ЦИКЛ НЕПРЕРЫВНОГО УЛУЧШЕНИЯ
*   **Триггер:** Завершение Мета-Аудита, использование протокола обхода в `#CP-1`, или прямая директива.
*   **Разграничение:**
    *   **Мелкое улучшение (Задача в `roadmap`):** Исправление опечатки, уточнение формулировки, не меняющее логику.
    *   **Крупное изменение (Требует `#META-1`):** Любое изменение, затрагивающее логику выполнения правил или добавляющее/удаляющее принцип.
*   **Процесс:** Я инициирую анализ и предлагаю либо новую задачу, либо запуск `#META-1`.

---

## ГЛАВА 5: ОСНОВНЫЕ РАБОЧИЕ ЦИКЛЫ

### ПРОЦЕДУРА #CYCLE-ENGINEER: РАБОЧИЙ ЦИКЛ "ИНЖЕНЕР"
1.  **Постановка задачи:** Напарник ставит задачу.
2.  **Анализ и План:** Я анализирую задачу. (Поддерживает `#CP-2`, `#CP-3`)
3.  **Утверждение Плана:** Напарник утверждает План. (Поддерживает `#CP-4`)
4.  **Генерация артефактов:** Я генерирую `modification_data.py` или другие артефакты. (Поддерживает `#CP-5`)
5.  **Верификация и Подтверждение:** Напарник верифицирует (`#DELIVERY-1`) и подтверждает получение.

---

## ГЛАВА 6: ПРОЦЕДУРЫ УПРАВЛЕНИЯ АРТЕФАКТАМИ

### ПРОЦЕДУРА #DELIVERY-1: ПАКЕТНАЯ ПЕРЕДАЧА АРТЕФАКТОВ
*   **Назначение:** Передача одного или нескольких файлов с гарантией целостности.
*   **Процесс Верификации:**
    1.  Я предоставляю артефакт вместе с контрольной суммой (SHA256).
    2.  **Действие Напарника:** Напарник верифицирует целостность с помощью скрипта `verify_checksum.bat` или любого другого SHA256-калькулятора.
    3.  **При несовпадении:** Напарник сообщает: `"SHA256 Mismatch"`. При повторном сбое инициируется `#DIAG-1`.
    4.  **При совпадении:** Напарник подтверждает получение (`+`).

### ПРОЦЕДУРА #PROC-ARCHIVE-1: АРХИВИРОВАНИЕ
*   **Назначение:** Обеспечить порядок и отслеживаемость артефактов, связанных с изменениями.
*   **Триггер:** Успешное развертывание (`deployment`) из `staging` в `production`.
*   **Процесс:** Директория `_reports/` из `staging` перемещается в `_ark_system/_applied_changes/[ID_патча]/`, связывая отчеты с конкретным изменением.

---

## ГЛАВА 7: СООТВЕТСТВИЕ ПРИНЦИПОВ И ПРОЦЕДУР

| Принцип | Поддерживающая Процедура |
| :--- | :--- |
| `#CP-1` (Обход) | `#PROC-IMPROVE-1` |
| `#CP-4`, `#CP-5` (План-Реализация) | `#CYCLE-ENGINEER` |
| `#CP-6` (Целостность) | `#META-1` |
| `#CP-7` (Устранение Неэффективности) | `#PROC-IMPROVE-1` |
| `#CP-8` (Анализ сбоя) | `#DEBUG-TRACE-1`, `#DIAG-1` |

---

## ГЛАВА 8: ГЛОССАРИЙ
*   **Антицикл (#M0):** Состояние, которое активируется после **двух (2) или более** последовательных попыток выполнить задачу, приводящих к **идентичному сбою**. Сбой считается идентичным, если совпадает либо **(А)** `тип ошибки`, `скрипт` и `строка кода` для технических сбоев, либо **(Б)** `нарушенный Принцип Ядра` для логических сбоев. Активирует `#DIAG-1`.
*   **Дерево Решений:** Упрощенное логическое представление, показывающее, как активные принципы повлияли на итоговый ответ.
*   **Патч:** Файл `modification_data.py`, содержащий одно логически изолированное изменение.
*   **Staging:** Тестовая среда (`_ark_system_staging`), моя единственная рабочая зона.
*   **Production:** Рабочая среда (`_ark_system`), неприкосновенная для меня.
*   **SHA256 Mismatch:** Сообщение о сбое верификации целостности файла.

---

## ГЛАВА 9: CHANGELOG
*   **v6.1 (25.08.2025):**
    *   Исправлена таблица соответствия принципов и процедур.
    *   Уточнено определение "Антицикла" с указанием порога и критериев идентичности сбоя.
    *   Добавлена процедура архивирования отчетов `#PROC-ARCHIVE-1`.
*   **v6.0 (25.08.2025):**
    *   КРУПНЫЙ РЕФАКТОРИНГ. Детализированы процедуры отладки, усилена `#DELIVERY-1`, добавлены примеры и Глоссарий.
---

## ГЛАВА 10: ПРОЦЕДУРЫ УПРАВЛЕНИЯ ОПЫТОМ

### ПРОЦЕДУРА #PROC-EXP-6: АСИНХРОННОЕ КОД-РЕВЬЮ ("АУДИТОР")
*   **Назначение:** Обеспечить глубокий, объективный и непредвзятый анализ "значимых событий" (ошибок, успехов, инсайтов) для извлечения системных уроков и предотвращения повторения ошибок.
*   **Ключевой Принцип:** Анализ должен проводиться "холодным" экземпляром ИИ ("Аудитором"), который инициализируется полным стратегическим контекстом, но не "зашумлен" тактическим контекстом текущей рабочей сессии.
*   **Процесс:**
    1.  **Инициация:** Напарник инициирует процедуру в рабочей сессии ("Исполнитель") командой `#REVIEW`. "Исполнитель" готовит "Пакет для Ревью" (контекст, лог, рефлексия).
    2.  **Аудит:** Напарник запускает новую сессию, определяя роль ИИ как "Аудитор". Он передает ему "Пакет для Ревью".
    3.  **Диалог-Анализ:** Напарник ведет диалог с "Аудитором" до полного прояснения первопричины.
    4.  **Синтез:** По команде Напарника `#SYNTHESIZE`, "Аудитор" генерирует финальный "вердикт" в формате JSON (согласно `EXPERIENCE_SCHEMA.md`) и соответствующий `modification_data.py` для его интеграции.
    5.  **Интеграция:** Напарник применяет патч, обновляя `ARK_EXPERIENCE_CODEX.json`.

---

## ГЛАВА 11: ПРОЦЕДУРЫ РАБОТЫ С ПРОЕКТАМИ

### ПРОЦЕДУРА #PROC-PROJECT-ONBOARDING: ВВОД ПРОЕКТА В ЭКСПЛУАТАЦИЮ
*   **Назначение:** Гарантировать, что любой существующий проект приводится в полное соответствие со стандартами системы ARK **перед** началом любой работы над ним.
*   **Триггер:** Первая попытка "Исполнителя" начать работу над проектом, который не имеет статуса "Готов к работе" в `ARK_MANIFEST.md`.
*   **Процесс:**
    1.  **Остановка:** "Исполнитель" обязан остановить запрос на работу и инициировать данный протокол.
    2.  **Анализ:** "Исполнитель" запрашивает у Напарника снимок текущей структуры проекта.
    3.  **План Рефакторинга:** "Исполнитель" создает и утверждает с Напарником план по приведению структуры и инструментов проекта в соответствие с `ARK_CODEX.md`.
    4.  **Исполнение:** План выполняется пошагово с помощью системы патчей.
    5.  **Фиксация:** После завершения, статус проекта в `ARK_MANIFEST.md` обновляется на "Готов к работе".

---

## ГЛАВА 12: МЕТА-ПРОЦЕДУРЫ ПРОЕКТИРОВАНИЯ

### МЕТА-ПРИНЦИП #MP-1: ПРИНЦИП ПОЛНОТЫ КОНТЕКСТА
*   **Правило:** Любая сущность (ИИ или инструмент), выполняющая аналитическую или аудиторскую функцию, должна по умолчанию получать полный стратегический контекст (GDD, Roadmap), а не только тактические правила. Контекст можно сужать только по явной, обоснованной директиве Напарника.


---

## ГЛАВА 2: ПРОЦЕДУРЫ ИНИЦИАЛИЗАЦИИ И КОНТЕКСТА (Дополнение)

### ПРОЦЕДУРА #PROC-INIT-2: РАСПРЕДЕЛЕНИЕ РОЛЕЙ
*   **Назначение:** Четко определить режим работы ИИ для текущей сессии.
*   **Триггер:** Завершение первичной инициализации (передачи "Пакета Контекста").
*   **Процесс:**
    1.  **Запрос Роли:** Первым действием ИИ после инициализации является запрос на определение роли.
    2.  **Выбор Напарника:** Напарник отвечает одним из ключевых слов: "ИСПОЛНИТЕЛЬ" или "АУДИТОР".
    3.  **Принятие Роли:** ИИ подтверждает принятую роль и переходит в соответствующий режим работы.
